"use client";

import { useEffect } from 'react';

const musicLogos = {
  spotify: `<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/></svg>`,
  soundcloud: `<svg viewBox="0 0 24 24" fill="currentColor"><path d="M1.175 12.225c-.051 0-.094.046-.101.1l-.233 2.154.233 2.105c.007.058.05.098.101.098.05 0 .09-.04.099-.098l.255-2.105-.27-2.154c0-.057-.045-.1-.09-.1m-.899.828c-.05 0-.078.045-.084.092l-.194 1.326.194 1.261c.006.053.034.09.084.09.051 0 .082-.037.088-.09l.227-1.261-.238-1.326c0-.047-.036-.092-.08-.092m1.77-1.179c-.058 0-.1.048-.109.108l-.227 2.336.227 2.257c0 .06.051.112.109.112.06 0 .11-.052.117-.112l.255-2.257-.27-2.336c0-.06-.056-.108-.11-.108m.899-.269c-.066 0-.115.058-.124.12l-.214 2.605.214 2.52c.009.067.058.125.124.125.066 0 .117-.058.126-.125l.239-2.52-.248-2.605c0-.062-.06-.12-.117-.12m.904-.284c-.072 0-.13.063-.136.134l-.194 2.889.194 2.797c.006.077.064.138.136.138.076 0 .137-.061.145-.138l.22-2.797-.22-2.889c-.008-.071-.069-.134-.145-.134zm.893-.221c-.08 0-.143.069-.148.148l-.181 3.11.181 2.835c.005.08.068.147.148.147.08 0 .145-.067.152-.147l.207-2.835-.207-3.11c-.007-.079-.072-.148-.152-.148zm.9.005c-.084 0-.152.073-.162.158l-.165 3.105.165 2.88c.01.084.078.16.162.16.085 0 .155-.076.164-.16l.189-2.88-.189-3.105c-.009-.085-.079-.158-.164-.158zm.892.046c-.092 0-.166.08-.176.173l-.148 3.059.148 2.898c.01.097.084.178.176.178.093 0 .168-.081.178-.178l.17-2.898-.17-3.059c-.01-.093-.085-.173-.178-.173zm.897.081c-.098 0-.177.086-.185.186l-.132 2.978.132 2.94c.008.1.087.188.185.188.099 0 .179-.088.188-.188l.155-2.94-.155-2.978c-.009-.1-.089-.186-.188-.186zm.875.098c-.105 0-.19.093-.199.201l-.117 2.88.117 2.938c.009.11.094.202.199.202.106 0 .191-.092.201-.202l.138-2.938-.138-2.88c-.01-.108-.095-.201-.201-.201zm.907.107c-.11 0-.197.097-.208.212l-.101 2.773.101 2.946c.011.119.098.215.208.215.112 0 .199-.096.21-.215l.125-2.946-.125-2.773c-.011-.115-.098-.212-.21-.212zm-13.815-.094c-.055 0-.101.05-.107.106l-.177 1.207.177 1.146c.006.059.052.107.107.107.056 0 .104-.048.109-.107l.205-1.146-.205-1.207c-.005-.056-.053-.106-.109-.106zm2.699 1.867c.113 0 .201-.101.211-.221l.111-2.666-.111-1.427c-.01-.12-.098-.221-.211-.221-.113 0-.202.101-.213.221l-.1 1.427.1 2.666c.011.12.1.221.213.221zm.906.094c.119 0 .211-.104.223-.227l.105-2.76-.105-1.37c-.012-.126-.104-.23-.223-.23-.12 0-.213.104-.225.23l-.092 1.37.092 2.76c.012.123.105.227.225.227zm.904.116c.126 0 .222-.109.234-.24l.098-2.876-.098-1.333c-.012-.131-.108-.241-.234-.241-.127 0-.223.11-.235.241l-.087 1.333.087 2.876c.012.131.108.24.235.24zm.91.137c.129 0 .228-.115.241-.252l.088-3.013-.088-1.297c-.013-.137-.112-.252-.241-.252-.131 0-.23.115-.242.252l-.078 1.297.078 3.013c.012.137.111.252.242.252zm.903.155c.134 0 .236-.121.248-.265l.08-3.168-.08-1.264c-.012-.144-.114-.265-.248-.265-.135 0-.238.121-.251.265l-.07 1.264.07 3.168c.013.144.116.265.251.265zm.908.181c.139 0 .242-.126.256-.277l.071-3.349-.071-1.23c-.014-.15-.117-.277-.256-.277-.141 0-.244.127-.257.277l-.062 1.23.062 3.349c.013.151.116.277.257.277zm.904.21c.145 0 .249-.131.264-.288l.063-3.559-.063-1.195c-.015-.157-.119-.288-.264-.288-.146 0-.25.131-.265.288l-.055 1.195.055 3.559c.015.157.119.288.265.288zm.907.238c.15 0 .256-.137.271-.301l.055-3.797-.055-1.161c-.015-.164-.121-.301-.271-.301-.151 0-.258.137-.272.301l-.046 1.161.046 3.797c.014.164.121.301.272.301zm.905.271c.155 0 .262-.142.279-.313l.046-4.068-.046-1.127c-.017-.171-.124-.313-.279-.313-.157 0-.264.142-.281.313l-.038 1.127.038 4.068c.017.171.124.313.281.313zm.909.303c.16 0 .269-.148.286-.326l.037-4.371-.037-1.093c-.017-.178-.126-.326-.286-.326-.161 0-.27.148-.287.326l-.03 1.093.03 4.371c.017.178.126.326.287.326zm.906.337c.166 0 .276-.154.294-.339l.029-4.708-.029-1.058c-.018-.185-.128-.339-.294-.339-.167 0-.277.154-.295.339l-.022 1.058.022 4.708c.018.185.128.339.295.339zm.908.371c.172 0 .283-.16.302-.352l.02-5.079-.02-1.024c-.019-.192-.13-.352-.302-.352-.173 0-.284.16-.303.352l-.013 1.024.013 5.079c.019.192.13.352.303.352z"/></svg>`,
  youtube: `<svg viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>`
};

const colors = {
  spotify: '#00d9ff',
  soundcloud: '#00b8e6',
  youtube: '#0099cc'
};

export default function FallingIcons() {
  useEffect(() => {
    const createFallingLogo = () => {
      const musicHub = document.querySelector('.music-hub') as HTMLElement;
      if (!musicHub) return;

      const logoKeys = Object.keys(musicLogos);
      const randomLogo = logoKeys[Math.floor(Math.random() * logoKeys.length)] as keyof typeof musicLogos;

      const logo = document.createElement('div');
      logo.innerHTML = musicLogos[randomLogo];
      logo.style.position = 'absolute';
      logo.style.top = '-50px';
      logo.style.left = Math.random() * 100 + '%';
      logo.style.width = (Math.random() * 30 + 20) + 'px';
      logo.style.height = (Math.random() * 30 + 20) + 'px';
      logo.style.opacity = (Math.random() * 0.3 + 0.1).toString();
      logo.style.pointerEvents = 'none';
      logo.style.zIndex = '1';
      logo.style.color = colors[randomLogo];

      musicHub.appendChild(logo);

      const fallDuration = Math.random() * 8 + 6; // 6-14 seconds
      const fallDistance = musicHub.offsetHeight + 100;
      const horizontalDrift = (Math.random() - 0.5) * 100;

      logo.animate([
        {
          transform: 'translateY(0) translateX(0) rotate(0deg)',
          opacity: logo.style.opacity
        },
        {
          transform: `translateY(${fallDistance}px) translateX(${horizontalDrift}px) rotate(${Math.random() * 360}deg)`,
          opacity: '0'
        }
      ], {
        duration: fallDuration * 1000,
        easing: 'linear'
      }).onfinish = () => logo.remove();
    };

    // Create logos continuously
    const interval = setInterval(() => {
      createFallingLogo();
    }, 800);

    // Create initial batch
    for (let i = 0; i < 5; i++) {
      setTimeout(() => createFallingLogo(), i * 200);
    }

    return () => clearInterval(interval);
  }, []);

  return null;
}
